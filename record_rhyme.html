<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sedgwick+Ave&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kurenaido&display=swap" rel="stylesheet">
    <title>Record-Rhyme</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>Record-Rhyme</h1>
    </header>
    <!-- ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー -->
    <main>
        <div id="search">
            <h2>Search</h2>
            
            <h3>母音：あ行=1 い行=2 う行=3 え行=4 お行=5</h3>
            
            
            
            <div>vowel-number<input type="number" id="str"></div>
            <div>generation<input type="text"  id="pass"></div>
            <div><button id="inn">韻踏みボタン</button></div>
            
            
        </div>
        <!-- ----------------- -->
        <div id="record">
            <h2>Record</h2>
            <div>vowel-number<input type="number" id="num"></div>
            <div>record-rhyme<input type="text" size="60px" id="rhyme"></div>
            <ul>
                <li id="get">Get</li>
                <li id="save">Save</li>
                <li id="remove">Remove</li>
                <li id="clear">Reset</li>
            </ul>
            
            <div class="wrapper">
                <p id="text"></p>
                <!-- <button id="button">COPY!</button> -->
            </div>
            
            <table id="list">
                
            </table>
        </div>
    </main>
    <!-- --------------------------------------------------------------------- -->
    <script>
        // search_Range------------------------------------------------------------
        document.querySelector("#inn").onclick = function () {

let box = [];
let n;
const str = document.querySelector("#str").value;
let num = str.length; //文字列の長さを取得
for (let i = 0; i < num; i++) {
    let bas = '';
    const a = ['あ', 'か', 'さ', 'た', 'な', 'は', 'ま', 'や', 'ら', 'わ', 'が', 'ざ', 'だ', 'ば', 'ぱ', 'きゃ', 'しゃ'];//, 'ちゃ', 'にゃ', 'ひゃ', 'みゃ', 'りゃ', 'ぎゃ', 'じゃ', 'びゃ', 'ぴゃ', 'ふぁ', 'ゔぁ'];
    const b = ['い', 'き', 'し', 'ち', 'に', 'ひ', 'み', 'り', 'ぎ', 'じ', 'ぢ', 'び', 'ぴ', 'うぃ', 'てぃ', 'ふぃ'];//, 'でぃ'];
    const c = ['う', 'く', 'す', 'つ', 'ぬ', 'ふ', 'む', 'ゆ', 'る', 'ぐ', 'ず', 'づ', 'ぶ', 'ぷ'];//, 'しゅ', 'ちゅ', 'ひゅ', 'じゅ', 'でゅ', 'ぎゅ', 'ぴゅ', 'びゅ', 'にゅ', 'みゅ', 'りゅ', 'ふぅ'];
    const d = ['え', 'け', 'せ', 'て', 'ね', 'へ', 'め', 'れ', 'げ', 'ぜ', 'で', 'べ', 'ぺ', 'うぇ', 'ちぇ', 'ふぇ'];//, 'じぇ', 'ぎぇ', 'ひぇ', 'しぇ', 'びぇ', 'ぴぇ'];
    const e = ['お', 'こ', 'そ', 'と', 'の', 'ほ', 'も', 'よ', 'ろ', 'を', 'ご', 'ぞ', 'ど', 'ぼ', 'ぽ', 'しょ', 'ひょ'];//, 'ぎょ', 'ふぉ', 'ちょ', 'りょ', 'びょ', 'ぴょ', 'じょ', 'みょ'];
    const len = a.length;
    const len2 = b.length;
    const len3 = c.length;
    const len4 = d.length;
    const len5 = e.length;
    bas += str.charAt(i);
    if (bas == 1) {
        const r = Math.floor(Math.random() * len);
        box.push(a[r]);
        // str.charAt(n+1);
    } else if (bas == 2) {
        const r = Math.floor(Math.random() * len2);
        box.push(b[r]);
        // str.slice(n);
    } else if (bas == 3) {
        const r = Math.floor(Math.random() * len3);
        box.push(c[r]);
        // str.slice(n);
    } else if (bas == 4) {
        const r = Math.floor(Math.random() * len4);
        box.push(d[r]);
        // str.slice(n);
    } else if (bas == 5) {
        const r = Math.floor(Math.random() * len5);
        box.push(e[r]);
        // str.slice(n);
    }
}
document.querySelector("#pass").value = box;
}
// record_Range------------------------------------------------------------
//Save クリックイベント
$("#save").on("click", function () {
    const key = $("#num").val();
    const value = $("#rhyme").val();
    localStorage.setItem(key, value);
    const html = '<tr><th>' + key + '</th><td>' + value + '</td></tr>';
    $("#list").append(html);
});

//データの取得
$("#get").on("click",function(){
    const key = $("#num").val();
    const value = $("#rhyme").val();
    const name=localStorage.getItem(key, value);
    // const html = '<tr><th>' + key + '</th><td>' + value + '</td></tr>';
    $("#text").html(name);
});

//1レコード削除
$("#remove").on("click",function(){
    const key = $("#num").val();
    const value = $("#rhyme").val();
    const name=localStorage.removeItem(key, value);
    alert("削除を実行します。");
})

//Clear クリックイベント
        $("#clear").on("click", function () {
            localStorage.clear();
            $("#list").empty();
            alert("削除を実行します。");
        });
        
        //ライム読み込み：保存データ所得表示
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const value = localStorage.getItem(key);
            const html = '<tr><th>' + key + '</th><td>' + value + '</td></tr>';
            $("#list").append(html);
        }
        //コピーボタン
        // const button=document.getElementById('button');
        // const txt = document.getElementById('text').textContent;
        // button.addEventListener('click',()=>{
            //     navigator.clipboard
            //     .writeText(txt)
            //     .then(
                //         (clipText)=>
                //         document.querySelector("cliptext").innerText=
                //     clipText);
                //     button.innerHTML='OK!';
                //     setTimeout(()=>(button.innerHTML='COPY!'),1000);
                // });
                </script>
    <!-- ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー -->
<footer>
    <img src="./mark.png" alt="">
</footer>
</body>

</html>